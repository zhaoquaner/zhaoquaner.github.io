<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhaoquaner.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="赵圈儿的博客">
<meta property="og:url" content="https://zhaoquaner.github.io/page/12/index.html">
<meta property="og:site_name" content="赵圈儿的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ZhaoXin">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zhaoquaner.github.io/page/12/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/12/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>赵圈儿的博客</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">赵圈儿的博客</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ZhaoXin</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">169</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/Spring/3-%E5%9F%BA%E4%BA%8EXML%E7%9A%84DI%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/Spring/3-%E5%9F%BA%E4%BA%8EXML%E7%9A%84DI%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">3-基于XML的DI实现</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:57:03 / 修改时间：16:59:22" itemprop="dateCreated datePublished" datetime="2022-05-11T13:57:03+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基于xml的di实现">3-基于XML的DI实现</h1>
<p>依赖注入(DI)：表示创建对象后，给对象的属性赋值。</p>
<p>DI有两种实现方法：</p>
<ul>
<li>在spring配置文件中，使用标签和属性完成，叫做基于XML的DI实现。</li>
<li>使用spring的注解，完成属性赋值，叫做基于注解的DI实现。</li>
</ul>
<p>DI的语法分类：</p>
<ul>
<li>set注入(设值注入)：spring调用类的set方法，来完成属性赋值</li>
<li>构造注入：spring调用类的有参数构造器，完成属性赋值。</li>
</ul>
<p>先讲基于XML的DI实现。</p>
<p>创建一个User类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="set注入设值注入">set注入(设值注入)</h2>
<p>先来明确一个概念：简单类型。</p>
<p>Java 的简单类型包括基本数据类型和String。其他的都是引用数据类型。</p>
<p>使用XML配置文件进行设值注入的语法格式为：</p>
<p>上面是简单类型赋值，如果类里面包括引用类型，例如User里包括一个定义类Person，变量值为person，应这样定义：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.example.Person&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.example.User&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也就是需要在配置文件中，定义一个Person对象，然后使用ref标签来指向这个对象。这个Person对象也可以在定义在User代码后面。</p>
<p><strong>注意：</strong></p>
<ul>
<li><p><strong>如果要使用设值注入，那么属性必须有对应的set方法。并且spring只是调用对应set方法，至于set方法里面语句，spring不关心。</strong></p></li>
<li><p><strong>只要类里有set方法，那么就可以正常执行。也就是说，即使没有定义成员变量，只要有set方法就可以执行。</strong></p>
<p>例如，User中没有定义email变量，但是有<code>public void
setEmail(String
email)</code>这个set方法，那么在配置文件中也可以正常去调用，不会报错。</p></li>
<li><p><strong>赋值发生在调用无参数构造器创建对象之后。</strong></p></li>
</ul>
<h3 id="bean一些其他属性">bean一些其他属性</h3>
<ul>
<li>```xml <bean id="" class="" >
<property name="属性名字" value="属性的值"></property> </bean>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">    **其中bean标签还有一个属性为scope，它指定这个对象是单例还是多例，值分别为singleton/prototype**</span><br><span class="line">  </span><br><span class="line">    **当使用单例，那么每次ApplicationContext返回的都是同一个对象；如果使用多例，那么每次返回都是不同对象。**</span><br><span class="line">  </span><br><span class="line">    **并且，当使用单例，对象在创建IOC容器时创建；使用多例，对象在使用时才创建。**</span><br><span class="line"></span><br><span class="line">- lazy-init属性：它只对singleton的对象有效，默认为false。即在IOC容器创建时创建该对象。如果指定为true，那么该对象会在使用它时才创建出来</span><br><span class="line"></span><br><span class="line">- init-method和destory-method：想要在对象创建之后，执行某个方法，指定init-method属性；</span><br><span class="line">  </span><br><span class="line">    想要在IOC容器销毁后，执行某个方法，指定destory-method属性</span><br><span class="line"></span><br><span class="line">## 构造注入</span><br><span class="line"></span><br><span class="line">构造注入和设值注入语法差别不大。</span><br><span class="line"></span><br><span class="line">语法为：</span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;bean id=&quot;&quot; class=&quot;&quot;&gt;</span><br><span class="line">    &lt;constructor-arg index=&quot;&quot; name=&quot;&quot; value=&quot;&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>参数解释：</p>
<ul>
<li>index：表示构造方法参数的位置，从左到右，从0开始计数</li>
<li>name：构造函数的形参名</li>
<li>value：如果是简单数据类型，赋值使用value</li>
<li>ref：如果是引用数据类型，赋值使用ref</li>
</ul>
<p>Index和name属性有一个就可以；两个可以都不写，但是标签的顺序需要和构造方法参数的顺序一致。</p>
<h2
id="引用类型自动注入对于引用类型赋值的简化">引用类型自动注入（对于引用类型赋值的简化）</h2>
<p>在实际开发中，有大量的引用类型，如果每一个赋值都要用<code>&lt;property-name&gt;</code>标签，name代码会又臭又长。</p>
<p>引用类型的自动注入就是
spring框架可以根据某些规则自动给引用类型赋值，不再需要手动赋值了。</p>
<p>最常用的规则是byName、byType。</p>
<ul>
<li><p>byName(按名称注入)：<strong>Java类中引用类型变量的名称 和
配置文件中<bean>标签的id名称一样，并且数据类型也一致，那么容器中的bean，就可以赋值给引用类型</strong></p>
<p>语法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    简单类型属性赋值</span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中autowire属性，是指 引用类型按照 名称自动注入。</p>
<p>例子：</p>
<p>定义User：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">     <span class="keyword">private</span> Address address;<span class="comment">//这个变量名称</span></span><br><span class="line"></span><br><span class="line">     ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.example.point2.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;21&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.example.point2.Address&quot;</span>&gt;</span><span class="comment">&lt;!--这个id名称--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addressId&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addressName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;河北&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个例子中，User对象并没有赋值address的语句，但是因为User中定义Address引用类型变量的名称和id="address"一样，所以会自动赋值给User的address变量。</p>
<p>运行过程：spring在读取属性autowire后，知道按名字来注入，会先去User中拿到引用类型的名称address，然后和配置文件中所有bean的id比对，找到id一致的，并且数据类型相同，那么赋值给User的address引用变量。</p></li>
<li><p>byType(按类型注入)：<strong>Java类引用类型的数据类型和配置文件中bean标签的class属性是同源关系，这样的bean就可以赋值给引用类型</strong></p>
<p>同源：</p>
<ul>
<li><p>java类中引用类型和bean的class一致</p></li>
<li><p>java类中引用类型和bean的class是父子类关系</p></li>
<li><p>java类中引用类型和bean的class是接口和实现类关系</p>
<p>语法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">  简单类型赋值</span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.example.point2.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;21&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Jack&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;Myaddress&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.example.point2.Address&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addressId&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;addressName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;河北&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看出bean的id值并不是address，但是因为是按类型注入，所以也可以实现自动赋值。</p>
<p><strong>注意：在按类型注入时，bean只能有一个符合条件的，多于一个就会出现错误。</strong></p></li>
</ul></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/Spring/2-IOC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/Spring/2-IOC/" class="post-title-link" itemprop="url">2-IOC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:57:01 / 修改时间：16:59:13" itemprop="dateCreated datePublished" datetime="2022-05-11T13:57:01+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ioc">2-IOC</h1>
<h2 id="概念">概念</h2>
<p>​
控制反转(IOC)，是一种概念，一种思想。指将传统上由程序代码直接操纵的对象的调用权交给容器，通过容器来实现对象的装配和管理。控制反转指的就是
对对象控制权的转移，从程序代码本身反转到了外部容器。通过容器实现对象的创建、属性赋值、依赖的管理。</p>
<p>IOC是一种思想，它的实现方法有很多，比较流行的是依赖注入(Dependency
Injection) ，也叫DI，应用广泛。</p>
<p>如何理解IOC(截取知乎上一篇文章的核心部分):</p>
<blockquote>
<p>ioc的思想最核⼼的地⽅在于，资源不由使⽤资源的双⽅管理，⽽由不使⽤资源的第三⽅管理，这
可以带来很多好处。第⼀，资源集中管理，实现资源的可配置和易管理。第⼆，降低了使⽤资源
双⽅的依赖程度，也就是我们说的耦合度。
也就是说，甲⽅要达成某种⽬的不需要直接依赖⼄⽅，它只需要达到的⽬的告诉第三⽅机构就可
以了，⽐如甲⽅需要⼀双袜⼦，⽽⼄⽅它卖⼀双袜⼦，它要把袜⼦卖出去，并不需要⾃⼰去直接
找到⼀个卖家来完成袜⼦的卖出。它也只需要找第三⽅，告诉别⼈我要卖⼀双袜⼦。这下好了，
甲⼄双⽅进⾏交易活动，都不需要⾃⼰直接去找卖家，相当于程序内部开放接⼝，卖家由第三⽅
作为参数传⼊。甲⼄互相不依赖，⽽且只有在进⾏交易活动的时候，甲才和⼄产⽣联系。反之亦
然。这样做什么好处么呢，甲⼄可以在对⽅不真实存在的情况下独⽴存在，⽽且保证不交易时候
⽆联系，想交易的时候可以很容易的产⽣联系。甲⼄交易活动不需要双⽅⻅⾯，避免了双⽅的互
不信任造成交易失败的问题。因为交易由第三⽅来负责联系，⽽且甲⼄都认为第三⽅可靠。那么
交易就能很可靠很灵活的产⽣和进⾏了。这就是ioc的核⼼思想。⽣活中这种例⼦⽐⽐皆是，⽀付
宝在整个淘宝体系⾥就是庞⼤的ioc容器，交易双⽅之外的第三⽅，提供可靠性可依赖可灵活变更
交易⽅的资源管理中⼼。另外⼈事代理也是，雇佣机构和个⼈之外的第三⽅。
=update=
在以上的描述中，诞⽣了两个专业词汇，依赖注⼊和控制反转所谓的依赖注⼊，则是，甲⽅开放
接⼝，在它需要的时候，能够讲⼄⽅传递进来(注⼊)所谓的控制反转，甲⼄双⽅不相互依赖，交易
活动的进⾏不依赖于甲⼄任何⼀⽅，整个活动的进⾏由第三⽅负责管理。</p>
</blockquote>
<h3 id="什么是依赖">什么是依赖</h3>
<p>classA中有classB的实例，那么在classA中调用classB的方法完成实例，那么classA对classB有依赖。</p>
<p>依赖注入：是指，在程序运行过程中，若需要调用另一个对象协助时，无须再代码中创建，而是依赖于外部容器，由外部容器创建后传递给程序。</p>
<p>Spring的依赖注入对调用者和被调用者几乎没有任何要求，完全支持对象之间依赖关系的管理。</p>
<p>IOC的另一个体现是在使用Servlet时，没有创建过Servlet对象，而是由Tomcat来创建，所以也叫Tomcat容器。</p>
<h2 id="创建对象">创建对象</h2>
<p>在spring中，把Java对象叫做bean。</p>
<p>在使用maven管理项目时，在main目录下，创建resources目录，在该目录下创建spring的配置文件beans.xml。</p>
<p>在这个配置文件中，配置spring需要创建的类对象。格式为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>声明bean，就代表告诉spring创建某个类的对象，id是该对象的自定义名称，是唯一值，spring通过id找到这个对象；</p>
<p>一个bean标签声明一个对象。</p>
<p><strong>这种设置下，spring创建对象调用的是类的无参数构造器，所以如果要想让spring自动创建某个类的对象，该类必须有无参数构造器。后面会学到，添加标签和属性，spring可以调用有参构造器。</strong></p>
<p>class是对应类的全限定名称(不能是接口，只能是类)。</p>
<p>在spring框架中，有一个map，存放创建的对象，key和value分别是id和创建的对象。</p>
<p>例如有一个org.example.Test类，要让Spring去自动创建它，在配置文件beans.xml中应这样写：</p>
<p><code>&lt;bean id="test" class="org.example.Test" /&gt;</code></p>
<h2
id="创建容器对象applicationcontext">创建容器对象ApplicationContext</h2>
<p>spring帮我们创建好对象后，我们要使用ApplicationContext来获取对象，进行使用，它就表示spring容器。ApplicationContext是一个接口，最常用的实现类是ClassPathXmlApplicationContext，创建该类对象时有一个参数，是配置文件的路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">config</span> <span class="operator">=</span> <span class="string">&quot;beans.xml&quot;</span>;</span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(config);</span><br></pre></td></tr></table></figure>
<p><img src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/image/image-20201024172618382.png" alt="image-20201024172618382" style="zoom:50%;" /></p>
<p>这是例子项目的目录结构，beans.xml在resources目录下，在编译后，会在classes目录下，也就是类的根目录，所以变量config直接写"beans.xml"即可。</p>
<p>在创建ApplicationContext时，读取beans.xml文件时当读取到一个bean标签，就会创建一个对象。</p>
<p>然后使用该对象的getBean()方法来获取要使用的对象。该方法有多种重载形式，可以使用对象id作为参数来获取对象。并进行类型强制转换。</p>
<p>这种方法在后面慢慢就不会使用，但刚开始需要这样来获取。</p>
<h2 id="使用容器对象获取对象信息">使用容器对象获取对象信息</h2>
<p>可以使用ApplicationContext的方法来获取对象信息</p>
<h3 id="获取创建的对象数量">获取创建的对象数量</h3>
<p>使用getBeanDefinitionCount()方法来获取，返回值是int类型</p>
<h3 id="获取创建对象的名称id">获取创建对象的名称(ID)</h3>
<p>使用getBeanDefinitionNames()来获取，返回值是String数组</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/Spring/1-Spring%E7%AE%80%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/Spring/1-Spring%E7%AE%80%E8%BF%B0/" class="post-title-link" itemprop="url">1-Spring简述</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:57:00 / 修改时间：16:59:08" itemprop="dateCreated datePublished" datetime="2022-05-11T13:57:00+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/spring/" itemprop="url" rel="index"><span itemprop="name">Spring</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="spring简述">1-Spring简述</h1>
<p>Spring全家桶有很多东西，包括Spring Boot、Spring Cloud、Spring
MVC等等。Spring Framework是最基本的Spring 框架。</p>
<p>Spring帮助开发人员创建对象、管理对象之间的关系。spring的核心技术IOC、AOP，能实现模块之间，类之间的解耦合。</p>
<p>简单来说，IOC解决的是 对象管理和对象依赖的问题。</p>
<p>AOP解决的是 非业务代码抽取的问题。</p>
<p>Spring分为六大模块：</p>
<ul>
<li>Spring Core：核心功能，IOC容器，解决对象创建和依赖关系</li>
<li>Spring Web：Spring对web模块的支持
<ul>
<li>可以和struts整合，让struts的action创建交给spring</li>
<li>spring mvc模式</li>
</ul></li>
<li>Spring DAO：Spring对JDBC操作对的支持</li>
<li>Spring ORM：spring对ORM的支持
<ul>
<li>既可以和Hibernate整合</li>
<li>也可以使用spring的Hibernate操作的封装</li>
</ul></li>
<li>Spring AOP：切面编程</li>
<li>SpringEE：spring对JavaEE其他模块的支持</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/JSP/%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/JSP/%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1/" class="post-title-link" itemprop="url">内置对象</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:56:39 / 修改时间：16:55:11" itemprop="dateCreated datePublished" datetime="2022-05-11T13:56:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是内置对象">什么是内置对象</h2>
<p>JSP引擎在调用JSP对应jspServlet时，会传递或者创建9个与web开发相关的对象供jspServlet使用。</p>
<p>JSP技术设计者便于开发人员在编写JSP页面时获得这些web对象的引用，定义了9个响应变量，我们通过这些变量就可以快速获得这9大变量的引用。</p>
<p>9个内置对象：</p>
<ul>
<li>pageContext</li>
<li>page</li>
<li>config</li>
<li>request</li>
<li>response</li>
<li>session</li>
<li>application</li>
<li>exception</li>
<li>out</li>
</ul>
<h2 id="out对象">out对象</h2>
<h3 id="out对象api">out对象API</h3>
<ul>
<li>int getBufferSize()：得到缓存⼤⼩</li>
<li>int getRemaining()：得到未使⽤缓存的⼤⼩</li>
<li>boolean isAutoFlush()</li>
<li>void println()</li>
<li>void flush()</li>
<li>void close()</li>
<li>void clearBuffer()</li>
<li>void clear()</li>
</ul>
<p>out对象用于向浏览器输出数据，与之对应的是Serblet的PrintWriter对象。然后这个out对象的类型并不是PrintWriter，是JspWriter</p>
<p>简单理解就是JspWriter就是带缓存的PrintWriter</p>
<p>out对象的原理为：</p>
<figure>
<img
src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/20200824141612.png"
alt="image-20200824141605176" />
<figcaption aria-hidden="true">image-20200824141605176</figcaption>
</figure>
<p>只有向out对象中写入了内容。并且满足以下任何一个条件，out对象才会去调用getWriter方法。并且通过该方法返回的PrintWriter对象将out对象的缓冲区中的内容真正写入到Servlet引擎的缓冲区：</p>
<ul>
<li>设置page指令的buffer属性关闭了out对象的缓存功能</li>
<li>out对象的缓冲区满了</li>
<li>整个JSP页面结束</li>
</ul>
<p>一般在JSP页面输出使用表达式&lt;%=%&gt;，所以out对象用的不多</p>
<h2 id="request对象">request对象</h2>
<p>就是HttpServletRequest对象</p>
<h2 id="response对象">response对象</h2>
<p>就是HttpServletResponse对象</p>
<h2 id="config对象">config对象</h2>
<p>就是ServletConfig对象</p>
<h2 id="session对象">session对象</h2>
<p>就是Session对象</p>
<p>注意：在page指令下配置如下代码，session就不可用</p>
<p>&lt;%<span class="citation" data-cites="page">@page</span>
session="false" %&gt;</p>
<h2 id="application对象">application对象</h2>
<p>就是ServletContext对象</p>
<h2 id="page对象">page对象</h2>
<p>内置对象page是HttpJspPage对象，page对象代表当前的JSP页面，是当前JSP编译后Servlet类的对象。就是：page对象相当于java类的tihs</p>
<h2 id="exception对象">exception对象</h2>
<p>exception是java.lang.Exception类的对象，exception封装了JSP页面抛出的异常信息。exception经常用来处理错误页面。</p>
<p>一个小例子：模拟空指针错误，打印出现的异常</p>
<p>1.jsp代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页头&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">我是页头</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//模拟空指针异常</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sss</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    sss.length();</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>error.jsp代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">    	<span class="comment">//使用out对象的print方法打印出现的异常</span></span><br><span class="line">        out.print(<span class="string">&quot;程序出现异常，异常为&quot;</span> + exception);</span><br><span class="line">    %&gt;</span><br><span class="line">&lt;/center&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h2 id="pagecontext对象">pageContext对象</h2>
<p>pageContext是最重要的一个对象，它代表JSP页面编译后的内容(即JSP页面的运行环境)。</p>
<h3 id="pagecontext获取8个内置对象">pageContext获取8个内置对象</h3>
<p>通过pageContext可以获取到其他八个内置对象</p>
<p>直接使用pageContext提供的方法即可获取</p>
<h3 id="pagecontext作为域对象">pageContext作为域对象</h3>
<p>类似request,session,ServletContext
作为域对象而言，都有一下三个方法：</p>
<ul>
<li>setAttribute(String name, Object o)</li>
<li>getAttribute(String name)</li>
<li>removeAttribute(String name)</li>
</ul>
<p>所以，pageContext也同样有这三种方法。</p>
<ul>
<li>pageContext本质代表的就是当前JSP页面编译后的内容，作为域对象而言，它就代表当前JSP页面，也就是page。也就是说：pageContext域对象只在page范围内有效，超出page范围就无效了。</li>
</ul>
<p>pageContext本质代表编译后JSP后的内容。pageContext还封装了访问其他域的方法，</p>
<ul>
<li><p>上面pageContext默认是page范围的，但是pageContext对象重载了set，get和remove这三个方法。</p>
<ul>
<li>setAttribute(String name, Object value, int scope)</li>
<li>getAttribute(String name, int scope)</li>
<li>removeAttribute(String name, int scope)</li>
</ul>
<p>多了一个设置域范围的一个参数，如果不指定默认是page，当然，pageContext把request，session，application，page这几个域对象封装了静态变量供使用。</p>
<ul>
<li>PageContext.APPLICATION_SCOPE</li>
<li>PageContext.SESSION_SCOPE</li>
<li>PageContext.REQUEST_SCOPE</li>
<li>PageContext.PAGE_SCOPE</li>
</ul>
<p>没有使用这些重载方法时，PageContext是不能获取到request域对象的属性的。</p></li>
</ul>
<p>例子：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.jsp代码</span></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页头&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">我是页头</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//设置属性</span></span><br><span class="line">    request.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;2.jsp&quot;</span>&gt;&lt;/jsp:forward&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.jsp代码</span></span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页尾&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    	<span class="comment">//使用重载方法获取request设置的属性</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) pageContext.getAttribute(<span class="string">&quot;name&quot;</span>, PageContext.REQUEST_SCOPE);</span><br><span class="line">    %&gt;</span><br><span class="line">获取到的参数为:&lt;%=name%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>PageContext还有一个方法：findAttribute(String name)</p>
<p>该方法会查找各个域的属性，从小到大开始寻找，也就是page-&gt;request-&gt;session-&gt;application</p></li>
</ul>
<h3 id="引入和跳转">引入和跳转</h3>
<p>PageContext类定义了一个forward和两个include方法分别简化和代替RequestDispatcher.forward方法和include方法</p>
<ul>
<li>pageContext.forward(String url)</li>
<li>pageContext.include(String url)</li>
</ul>
<p>##　四种属性范围</p>
<p>目前为止，有４种属性范围。</p>
<ul>
<li>page：只在一个页面中保存属性，跳转页面无效</li>
<li>request：在一次请求中保存属性，服务器跳转有效，浏览器跳转无效</li>
<li>session：在一次会话范围中保存属性，无论何种跳转均有效，关闭浏览器后无效</li>
<li>application：在整个服务器中保存，所有用户都可以使用</li>
</ul>
<p>四个内置对象都支持一下方法：</p>
<ul>
<li>setAttribute(String name, Object o)</li>
<li>getAttribute(String name)</li>
<li>removeAttribute(String name)</li>
</ul>
<h2 id="应用场景">应用场景</h2>
<ol type="1">
<li>request：如果客户向服务器发请求，产生数据，用户看完后没用了，那么这种数据就可以存在request域。</li>
<li>session：如果客户向服务器发请求，产生数据，用户用完等一会还有用，这种数据就存在session域中</li>
<li>servletContext：如果客户向服务器发请求，产生数据，用户用完，其他用户还要用，就存在servletContext域中。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/JSP/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/JSP/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="post-title-link" itemprop="url">EL表达式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:55:39 / 修改时间：16:55:13" itemprop="dateCreated datePublished" datetime="2022-05-11T13:55:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是el表达式">什么是EL表达式</h2>
<p>表达式语言(Expression Language, EL) ,EL表达式是用"${}"
括起来的脚本，用来更方便的读取对象。EL表达式主要用来读取数据，进行内容显示。</p>
<h2 id="为什么使用el-表达式">为什么使用EL 表达式</h2>
<p>使用EL表达式，可以更简洁的读取对象中的属性，提交的参数、JavaBean、甚至集合。</p>
<p>例如在1.jsp中session设置了一个名为 name的属性</p>
<p>那么在2.jsp中间可以使用 <code>$&#123;name&#125;</code>来读取该参数。</p>
<h2 id="el表达式作用">EL表达式作用</h2>
<p>首先EL表达式语法为：</p>
<p>${标识符}</p>
<p><strong>EL表达式如果找不到相应的对象属性，返回的是一个空白字符串"",而不是null，这是EL表达式最大的特点。</strong></p>
<h3 id="获取各类数据">获取各类数据</h3>
<h4 id="获取域对象数据">获取域对象数据</h4>
<p>在1.jsp中设置ServletContext属性(就是application)</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"><span class="comment">//向ServletContext设置⼀个属性</span></span><br><span class="line">application.setAttribute(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;向application设置了⼀个属性&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>在2.jsp中获取该属性</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	$&#123;name&#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>之前讲ServletContext对象时讲过一个方法findAttribute(String
name)，EL表达式语句执行时会调用该方法，用标识符作为关键词分别从page、request、session、application四个域中查找相应对象。</p>
<p>查找顺序就是从小到大，上图所写顺序。</p>
<h4 id="获取javabean的属性">获取JavaBean的属性</h4>
<p>之前在JSP页面获取JavaBean属性需要先获取该对象，然后再访问该对象属性。使用EL表达式就很简单。</p>
<p>例如在1.jsp中定义了一个person对象，那么在2.jsp中直接使用<code>$&#123;person.age&#125;</code>就可以访问person的age属性。</p>
<h2 id="获取集合数据">获取集合数据</h2>
<p>EL表达式可以方便读取Collection和Map集合的内容。</p>
<p>例如，在1.jsp中设置session的属性，session属性的值为List集合，List集合装载Person对象</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页头&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    List&lt;Person&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person1.setUserName(<span class="string">&quot;mike&quot;</span>);</span><br><span class="line">    person1.setAge(<span class="number">25</span>);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person2.setUserName(<span class="string">&quot;smith&quot;</span>);</span><br><span class="line">    person2.setAge(<span class="number">55</span>);</span><br><span class="line">    list.add(person1);</span><br><span class="line">    list.add(person2);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;2.jsp&quot;</span>/&gt;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在2.jsp中使用EL表达式，读取list集合内容</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页尾&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%--取出person对象的属性--%&gt;</span><br><span class="line">对象person1的用户名为：$&#123;list[<span class="number">0</span>].userName&#125;,年龄为：$&#123;list[<span class="number">0</span>].age&#125;&lt;br&gt;</span><br><span class="line">对象person2的用户名为：$&#123;list[<span class="number">1</span>].userName&#125;,年龄为：$&#123;list[<span class="number">1</span>].age&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>再使用Map集合</p>
<p>在1.jsp中session属性存储了Map集合，Map集合的关键词是字符串，值是Person对象</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页头&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    Map&lt;String,Person&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person1.setUserName(<span class="string">&quot;mike&quot;</span>);</span><br><span class="line">    person1.setAge(<span class="number">18</span>);</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person2.setUserName(<span class="string">&quot;smith&quot;</span>);</span><br><span class="line">    person2.setAge(<span class="number">78</span>);</span><br><span class="line">    map.put(<span class="string">&quot;aa&quot;</span>, person1);</span><br><span class="line">    map.put(<span class="string">&quot;bb&quot;</span>, person2);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;map&quot;</span>, map);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;2.jsp&quot;</span>/&gt;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在2.jsp中进行读取</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页尾&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">对象person1的用户名为：$&#123;map.aa.userName&#125;,年龄为：$&#123;map.aa.age&#125;&lt;br&gt;</span><br><span class="line">对象person2的用户名为：$&#123;map.bb.userName&#125;,年龄为：$&#123;map.bb.age&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>如果Map集合存储键值不是字符串，而是一个数字，就不能使用"."号运算符了，可以这样：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&#123;map[<span class="string">&quot;1&quot;</span>].userName&#125;</span><br><span class="line">$&#123;map[<span class="string">&quot;2&quot;</span>].userName&#125;</span><br></pre></td></tr></table></figure>
<h2 id="el运算符">EL运算符</h2>
<p>EL表达式支持简单运算符：加减乘除取模，逻辑运算符，empty运算符(判断是否为null)和三目运算符</p>
<figure>
<img
src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/20200908100149.png"
alt="image-20200908093738083" />
<figcaption aria-hidden="true">image-20200908093738083</figcaption>
</figure>
<h2 id="el表达式11个内置对象">EL表达式11个内置对象</h2>
<p>EL表达式主要用来对内容显示，为了显示方便，EL表达式提供了11个内置对象。</p>
<ol type="1">
<li>pageContext：对应JSP页面的pageContext对象</li>
<li>pageScope：代表page域中保存属性的Map对象</li>
<li>requestScope：代表request域中保存属性的Map对象</li>
<li>sessionScope：代表session域中保存属性的Map对象</li>
<li>applicationScope：代表application域中保存属性的Map对象</li>
<li>param：表示一个保存了所有请求参数的Map对象</li>
<li>paramValues表示了一个保存了所有请求参数的Map对象，它对于某个请求参数，返回的是一个string[]</li>
<li>header：表示一个保存了所有http请求头字段的Map对象</li>
<li>headValues：同上，返回string[]数组</li>
<li>cookie：表示一个保存了所有cookie的Map对象</li>
<li>initParam：表示一个保存了一个所有web应用初始化参数的map对象</li>
</ol>
<p>注意事项：</p>
<ul>
<li>测试headerValues时，如果头里面有“-”，例如Accept-Encoding，则要headValues["Accept-Encoding"]</li>
<li>测试cookie时，例如<code>$&#123;cookie.key&#125;</code>取的是cooike对象，如果要访问cookie的名称和值，需要<code>$&#123;cookie.key.name&#125;</code>或者${cookie.key.value}</li>
<li>测试initParam时，初始化参数要的web.xml中的配置Context的，仅仅是jsp的参数是获取不到的</li>
<li>对于param和paramValues内置对象一般都是别的页面带数据来的，如表单、地址栏。</li>
</ul>
<h2 id="el表达式回显数据">EL表达式回显数据</h2>
<p>EL表达式最大特点就是如果获取到的数据为null，输出空白字符串"",这个特点可以让我们数据回显。</p>
<p>在1.jsp中模拟一下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页头&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person.setUserName(<span class="string">&quot;male&quot;</span>);</span><br><span class="line">    <span class="comment">//回显数据</span></span><br><span class="line">    request.setAttribute(<span class="string">&quot;person&quot;</span>, person);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;male&quot;</span> $&#123;person.userName==<span class="string">&#x27;male&#x27;</span> ? <span class="string">&#x27;checked&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;&gt;女</span><br><span class="line">&lt;input type=<span class="string">&quot;radio&quot;</span> name=<span class="string">&quot;sex&quot;</span> value=<span class="string">&quot;female&quot;</span> $&#123;person.userName==<span class="string">&#x27;female&#x27;</span> ? <span class="string">&#x27;checked&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;&gt;男</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/JSP/JavaBean/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/JSP/JavaBean/" class="post-title-link" itemprop="url">JavaBean</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:54:39 / 修改时间：16:55:15" itemprop="dateCreated datePublished" datetime="2022-05-11T13:54:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什么是javabean">什么是JavaBean</h2>
<p>JavaBean就是普通的java类，也称为简单java对象，是Java程序设计中一种设计模式，是一种基于java平台的软件组件思想</p>
<p>JavaBean遵循特定写法，通常有如下规则：</p>
<ul>
<li>有无参的构造函数</li>
<li>成员属性私有化</li>
<li>封装的属性如果需要被外所操作，必须编写public类型的setter，getter方法</li>
</ul>
<p>JavaBean实际非常简单。下面就是按照规则编写的一个JavaBean对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String username ;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> username;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.username = username;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="为什么需要使用javabean">为什么需要使用JavaBean</h2>
<p>简单来说就是：封装，重写，可读！</p>
<p>引用一段回答：</p>
<p>JaveBean你可以理解为⼀辆货⻋，在你的java端和web⻚⾯进⾏数据传递的载体，你当然可以每
个变量单独传递，或者使⽤集合传递，但是javabean可以使你的数据更有可读性，⽅便开发时明
确变量的意义，也使其他阅读你代码的⼈能直接你的意图。</p>
<p>如果把bean类和数据库联合使用，那么可以一张表使用一个bean类，使代码更加简洁高效，易于理解。现在大多数框架都会使用这种机制。</p>
<h2 id="jsp行为-javabean">JSP行为-JavaBean</h2>
<p>JSP技术提供了三个关于JavaBean组件的动作元素，即JSP行为(标签)，分别为：</p>
<ul>
<li>jsp:useBean：在JSP页面中查找JavaBean对象或者实例化JavaBean对象</li>
<li>jsp:setProperty：设置JavaBean属性</li>
<li>jsp:getProperty：获取JavaBean属性</li>
</ul>
<p>###　jsp:useBean</p>
<p><jsp:useBean> 标签用于在指定域范围内查找指定名称的JavaBean对象</p>
<ul>
<li>存在则直接返回该JavaBean对象的引用</li>
<li>不存在则实例化一个新的JavaBean对象并将它以指定名称存储到指定域范围中。</li>
</ul>
<p>语法：</p>
<p><jsp:useBean id="实例化对象的名称" class="类的全名" scope=“保存范围” /></p>
<p>如果JSP不支持这个行为，那么要使用Persion类是这样：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--这⾥需要导⼊Person类--%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;domain.Person&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="comment">//new出对象</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">person.setName(<span class="string">&quot;zhongfucheng&quot;</span>);</span><br><span class="line">System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>我们使用jsp:useBean就非常简洁，不需要导包，不用new对象</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">person.setName(<span class="string">&quot;zhongfucheng&quot;</span>);</span><br><span class="line">System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>要想使用这个行为，对应类必须有无参的构造函数，因为在内部中new对象时是没有传递参数的。</p>
<h3 id="jspsetproperty">jsp:setProperty</h3>
<p>语法：</p>
<p><jsp:setProerty name="对象名称" property="属性名" param="参数名" value="值"></p>
<p>语法上分为四种模式：</p>
<ul>
<li><jsp:setProperty name="对象名称 "  property="*" /> ：自动匹配</li>
<li><jsp:setProperty name="对象名称 "  property="属性名称" />：指定属性</li>
<li><jsp:setProperty name="对象名称 "  property="属性名称" param="参数名称" />：指定参数(很少用)</li>
<li><jsp:setProperty name="对象名称 "  property="属性名称" param="参数名称"  value="内容"/>：指定内容(很少用)</li>
</ul>
<p>例子：</p>
<p>例如表单代码为：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/zhongfucheng/1.jsp&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">⽤户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text &quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>处理表单提交过来数据的jsp代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> Integer.parseInt(request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">person.setAge(age);</span><br><span class="line">System.out.println(person.getAge());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>这样可以完成，表单提交过来的数据填充到person对象中，但是比较麻烦。</p>
<p>使用jsp:setProperty：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">&lt;%--指定属性名称为age--%&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">System.out.println(person.getAge());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>也可以完成，并且代码更少。<strong>无需去指定属性，它会去自动进行匹配。但是需要Persion的属性名称和表单的name属性名称是一模一样的。就可以自动完成匹配。</strong></p>
<p>再来一个：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">&lt;%--property的值设置为*就代表⾃动匹配--%&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;*&quot;</span>/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">System.out.println(person.getAge());</span><br><span class="line">System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>只要在设置property的值为*，就可自动匹配。</p>
<p>我们不需要进行类型转换，内部会自动帮我们进行转换。</p>
<h3 id="jspgetproperty">jsp:getProperty</h3>
<p>语法：</p>
<p><jsp:getProperty name="对象名" property="属性名" /></p>
<p>该jsp行为很简单，直接使用该行为输出就可以</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--使⽤&lt;jsp:getProperty&gt;输出--%&gt;</span><br><span class="line">&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/JSP/JSP%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/JSP/JSP%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">JSP入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:53:39 / 修改时间：16:55:17" itemprop="dateCreated datePublished" datetime="2022-05-11T13:53:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>JSP全称为Java Server
Pages，java服务器页面，特点是HTML代码和Java代码共同存在。</p>
<h2 id="为什么需要jsp">为什么需要JSP</h2>
<p>Servlet输出HTML比较麻烦，代码量比较多，很不方便，JSP就是替代Servlet输出HTML的。</p>
<h2 id="jsp工作原理">JSP工作原理</h2>
<p>Tomcat访问任何资源其实都是在访问Servlet，JSP也不例外。JSP本身就是一种Servlet，为什么呢？其实JSP在第一次被访问时会被编译成HttpJspPages类，是HttpServlet的一个子类。</p>
<p>编译过程是：浏览器第一次请求jsp文件时，Tomcat会将jsp文件转换为java一个类，然后编译为class文件，然后再运行class文件来响应浏览器请求。</p>
<p>以后在访问该jsp文件就不会重新编译了，直接调用class文件，如果tomcat检测出jsp页面改动的话，就会重新编译。</p>
<p>JSP是一个Servlet，那么jsp页面中html是如何发送到浏览器的呢》其实就是使用write方法发送的。所以JSP就是封装了Servlet的java程序而已。</p>
<p>那么JSP的代码服务器是怎么执行的呢？HttpJspPages类中有一个方法叫_jspService()，由jsp转换的java代码就在该方法中。</p>
<p>JSP之所以比Servlet更方便简单的一个原因是：JSP内置了9个对象：out、session、response、request、config、page、application、pageContext、exception。</p>
<h2 id="jsp生命周期">JSP生命周期</h2>
<p>JSP也是一个Servlet，运行时也只有一个实例，JSP初始化和销毁时会调用Servlet的init和destroy方法。另外，JSP还有自己初始化和销毁的方法。</p>
<figure>
<img
src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/20200821142742.png"
alt="image-20200821142735578" />
<figcaption aria-hidden="true">image-20200821142735578</figcaption>
</figure>
<h2 id="jsp基本语法">JSP基本语法</h2>
<p>JSP代码分为两部分：</p>
<ul>
<li>HTML代码</li>
<li>元素：JSP页面中的java代码、JSP指令、JSP标签</li>
</ul>
<h3 id="jsp脚本">JSP脚本</h3>
<p>JSP脚本就是java代码，也叫做scriptlet。JSP的脚本必须使用&lt;%%&gt;括起来，不然JSP文件无法识别。</p>
<p>JSP脚本有三种方式：</p>
<ul>
<li>&lt;%%&gt;：定义局部变量，编写语句</li>
<li>&lt;%!%&gt;：定义类或方法，<strong>但是没有人这样用</strong></li>
<li>&lt;%=%&gt;：表达式输出输出各种类型变量，例如&lt;%=num1%&gt;，就是输出num1变量</li>
</ul>
<h3 id="jsp指令">JSP指令</h3>
<p>JSP指令用来声明JSP页面相关属性，例如编码方式，文档类型等。</p>
<p>JSP指令的语法格式为：</p>
<p>&lt;%@ 指令 属性="值" %&gt;</p>
<p>例如，page指令常见的属性：</p>
<ul>
<li>language="java"</li>
<li>extends="package.class"</li>
<li>import="{package.class | package.*},..."</li>
<li>session="true | false"</li>
<li>buffer="none | 8kb | size kb"</li>
<li>autoFlush="true | false"</li>
<li>info="text"</li>
<li>errorPage="relatice_url"</li>
<li>isErrorPage="true ｜false"</li>
<li>contentPage="mineType; charset=charracterSet" |
"text/html";charset=ISO-8859-1"</li>
<li>pageEncoding="characterSet | ISO-8859-1"</li>
<li>isELIgnored="true | false"</li>
</ul>
<p>一般在高级开发工具上例如IDEA开发，只需要在page指令中指定contentType="text/html;charset=utf-8",就不会出现中文乱码问题。当然contentType不仅可以指定以text/html方式显示出来，还可以使用其他形式。</p>
<p>使用errorPage属性可以指定如果当前页面出错，要跳转到哪个页面，isErrorPage指定该页面是否为要跳转的错误页面。例如：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--index.jsp代码--&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;&lt;!--指定出错后，跳转到error页面--&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">2</span> / <span class="number">0</span>;<span class="comment">//这是出错位置</span></span><br><span class="line">%&gt;</span><br><span class="line">变量num3的值为：&lt;%=result%&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--error.jsp代码--&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;&lt;!--指定该页面为错误页面--&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">        &lt;font style=<span class="string">&quot;color: red; font-size: 40px&quot;</span>&gt;您访问的页面出错啦出错啦～～～&lt;/font&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>执行结果为：</p>
<figure>
<img
src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/20200821150012.png"
alt="image-20200821150012375" />
<figcaption aria-hidden="true">image-20200821150012375</figcaption>
</figure>
<p>但是发现，地址栏并没有改变，说明这次跳转是在服务器内发生的。</p>
<p>但是，这样一个一个jsp去设置错误页面太麻烦了，我们可以在web.xml文件中去指定全局错误页，无论哪个jsp发生错误，都会转到该页。</p>
<p>代码为：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;error-page&gt;&lt;!--这个错误页面标签指定当发生<span class="number">404</span>错误代码时，跳转到error.jsp页面--&gt;</span><br><span class="line">&lt;error-code&gt;<span class="number">404</span>&lt;/error-code&gt;</span><br><span class="line">&lt;location&gt;/error.jsp&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br><span class="line"></span><br><span class="line">&lt;error-page&gt;&lt;!--这个错误页面标签指定当发生空指针异常时，跳转到error.jsp页面--&gt;</span><br><span class="line">&lt;exception-type&gt;java.lang.NullPointerException&lt;/exception-type&gt;</span><br><span class="line">&lt;location&gt;/error.jsp&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br></pre></td></tr></table></figure>
<h4 id="将html代码和java代码混合使用">将HTML代码和Java代码混合使用</h4>
<p>例如：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">11</span>;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">if</span>(age &gt;= <span class="number">15</span>) &#123;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;font style=<span class="string">&quot;color:red; font-size: 40px&quot;</span>&gt;欢迎光临&lt;/font&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;font style=<span class="string">&quot;color:red; font-size: 40px&quot;</span>&gt;谢绝入内&lt;/font&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>多个&lt;%%&gt;可以看成是一个&lt;%%&gt;标签，使用if
else语句来进行选择输出。</p>
<p>再例如使用for循环：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;afgdhshsg&quot;</span>;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">%&gt;</span><br><span class="line">    &lt;h1&gt;&lt;%=s.charAt(i)%&gt;&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<h4 id="include指令">include指令</h4>
<p>在学request对象时，曾经使用request.getRequestDispatcher(String
url).include(request, response)来对页头和页尾进行包括。</p>
<p>include指令也是相同的作用。</p>
<p>include指令是静态包含，意思就是：比文件的代码内容都包含进来，再进行编译。</p>
<p>例如：</p>
<p>1.jsp文件和2.jsp文件分别为：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--<span class="number">1.</span>jsp--&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页头&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">我是页头</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">2.</span>jsp--&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;我是页尾&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">我是页尾</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>然后index.jsp为：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;%<span class="meta">@include</span> file=<span class="string">&quot;1.jsp&quot;</span>%&gt;</span><br><span class="line">        &lt;%<span class="meta">@include</span> file=<span class="string">&quot;2.jsp&quot;</span>%&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>输出内容为前两个文件的内容。</p>
<h4 id="taglib指令">taglib指令</h4>
<p>JSP支持标签技术，要使用标签技术就要先声明标签库和标签前缀，taglib指令就是用来指明JSP页面内使用标签库技术。</p>
<p>后面再细说。</p>
<p>###　JSP行为</p>
<p>JSP行为是一组内置的标签，只需要书写少量标记代码就能够使用JSP提供的丰富功能。JSP行为是对常用的JSP功能的抽象和封装。</p>
<p>这些其实就是标签。但之所以把这些内置标签称为行为，是因为要把JSTL标签区分开。当然，也可以直接把它称之为JSP标签。</p>
<h4 id="include行为">include行为</h4>
<p>刚才说了，include指令是静态包含，include行为是动态包含。include行为就是封装了request.getRequestDispatcher(String
url).include(request, response)</p>
<p>include行为语法格式为：<jsp:include page="" /></p>
<p>现在有静态包含和动态包含，但是推荐使用动态包含。</p>
<p>原因是：动态包含可以向被包含的页面传递参数（但是用处不大），并且分别处理包含页面(就是先将包含页面编译再写入)，如果有相同名称的参数，使用静态包含就会报错(因为静态包含是先写入再编译)，使用动态包含就不会出错。</p>
<h4 id="param行为">param行为</h4>
<p>当使用jsp:include和jsp:forward行为引入或请求转发其他资源时，可以使用jsp:param行为向这个资源传递参数</p>
<h4 id="forward行为">forward行为</h4>
<p>学习request对象时，使用request.getRequestDispatcher(String
url).forward(request,
response)进行跳转，forward行为就是对其进行封装。</p>
<p>语法为：</p>
<p><jsp:forward page="" /></p>
<p>如果要传递参数，就需要在forward行为嵌套param行为</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=<span class="string">&quot;2.jsp&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;hhhh&quot;</span> /&gt;</span><br><span class="line">&lt;/jsp:forward&gt;    </span><br></pre></td></tr></table></figure>
<p>在2.jsp页面中获取到传递的参数</p>
<p>&lt;%</p>
<p>​ String ss = request.getParameter("username");</p>
<p>%&gt;</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/AJAX/1-Ajax%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/AJAX/1-Ajax%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">Ajax</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:52:39 / 修改时间：16:54:52" itemprop="dateCreated datePublished" datetime="2022-05-11T13:52:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Ajax是用来做局部刷新的，即在不重新加载刷新整个页面的同时，只更新页面的一部分数据。局部刷新使用的核心对象是异步对象：XMLHttpRequest，这个异步对象是存在在浏览器的内存中的。使用JS语法来创建该对象。</p>
<h2 id="ajax异步实现步骤">AJAX异步实现步骤</h2>
<ol type="1">
<li><p>创建对象方式</p>
<p><code>var xmlHttp = new XMLHttpRequest();</code></p></li>
<li><p>给异步对象绑定事件：onreadystatechange</p>
<p>当异步对象发起了请求，获取了数据都会触发这个事件，这个事件指定一个函数，处理状态的变化。</p>
<p><code>xmlHttp.onreadystatechange=function()&#123;&#125;</code></p></li>
<li><p>初始化异步请求对象</p>
<p>异步对象有一个open方法，<code>xmlHttp.open(请求方式 get |post,
访问地址，同步|异步请求(默认为true，即异步))</code></p>
<p>例如<code>xmlHttp.open("get", "loginServlet?name=zxpwd=123",
true);</code></p></li>
<li><p>使用异步对象发送请求</p>
<p>xmlHttp.send(str)：当用POST方式发请求会使用str参数</p></li>
<li><p>获取服务端返回的数据，使用异步对象的属性：responseText</p></li>
</ol>
<p>XMLHttpRequest有三个重要属性：</p>
<ol type="1">
<li>onreadystatechange属性：一个函数，每当readyState属性改变时，会调用该函数</li>
<li>readyState属性：表示XMLHttpRequest请求的状态，从0到4发生变化
<ul>
<li>0：请求未初始化，创建异步请求对象</li>
<li>1：初始化异步请求对象，xmlHttp.open(请求方式，请求地址，true)</li>
<li>2：异步对象发送请求，xmlHttp.send()</li>
<li>3：异步对象介绍应答数据，从服务器端返回数据，XMLHttpRequest内部处理</li>
<li>4：异步对象已经将数据解析完毕，此时才可读取数据</li>
</ul></li>
<li>status属性：
<ul>
<li>200：‘OK’</li>
<li>404：未找到页面</li>
</ul></li>
</ol>
<p><strong>注意：open函数的URL请求的地址是不加/的servlet名称，例如Servlet1的url-pattern为/one，则参数填one即可</strong></p>
<p><strong>注意：如果使用POST请求向服务端传参数，那么必须设置RequestHeader，为httpRequest.setRequestHeader("Content-type",
"application/x-www-form-urlencoded");，如果没有，那么后台就无法获取参数，并且设置请求头要在open函数执行完后</strong></p>
<p><strong>注意：open方法的最后一个参数，true代表异步请求：即使用异步对象发起请求后，不需要等待数据的返回，即可进行其他操作</strong></p>
<h2 id="使用json格式传递数据">使用JSON格式传递数据</h2>
<p>有四种处理JSON的工具库，分别为Gson(Google的)，fastjson(阿里巴巴的)，Jackson，还有一个忘了。</p>
<p>我用的是jackson。</p>
<p>首先将jackson的jar导入项目依赖。</p>
<h3
id="将java对象转换为json格式的字符串">将Java对象转换为Json格式的字符串</h3>
<ol type="1">
<li>创建ObjectMapper对象：<code>ObjectMapper om = new
ObjectMapper()</code></li>
<li>使用该对象的 String writeValueAsString(Object
value)方法将Java对象转换为json格式的字符串，Java对象的对应变量名称为json中的key，实际值就为json格式的value</li>
<li>设置响应头的Content-type为“application/json;charset=utf-8”</li>
<li>然后使用响应头的PrintWriter将该字符串写入</li>
</ol>
<h3 id="在js中解析该字符串">在js中解析该字符串</h3>
<p>使用js中JSON的prase解析该字符串，返回一个json对象，使用 . 运算符
后面跟json的name即可访问对应value</p>
<p>或使用js的eval函数，前后分别加"("和")"，例如 var jsonObj = eval("()"
+ json + ")");，返回一个json对象</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/JQuery/5-JQuery%E4%BD%BF%E7%94%A8Ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/JQuery/5-JQuery%E4%BD%BF%E7%94%A8Ajax/" class="post-title-link" itemprop="url">5-JQuery使用Ajax</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:51:39 / 修改时间：16:55:07" itemprop="dateCreated datePublished" datetime="2022-05-11T13:51:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>使用Jquery来发送异步请求。有几个常用的方法：<code>load()</code>、<code>get()</code>、<code>post()</code>等。</p>
<h2 id="load方法">load方法</h2>
<p>JQuery的load方法是从服务器中加载数据，并把返回的数据放入到被选元素中。</p>
<p>语法： <code>$(selector).load(url, data, callback)</code></p>
<p>参数：</p>
<ul>
<li>url：规定希望加载的URL</li>
<li>data：与请求一同发送的字符串键值对集合，格式为<code>&#123;key:value,...&#125;</code></li>
<li>callback：是load方法完成后执行的函数名称</li>
</ul>
<p>其中可选参数callback是load方法完成后的回调函数，可以设置不同参数：</p>
<ul>
<li>responseTxt：调用成功后返回结果内容</li>
<li>statusTXT：调用的状态</li>
<li>xhr：包含XMLHttpRequest对象</li>
</ul>
<h2 id="get方法">get方法</h2>
<p>get方法通过GET请求给服务器发起请求。</p>
<p>语法： <code>$(selector).get(url, data, success(response, status,
xhr), dataType)</code></p>
<p>参数：</p>
<ul>
<li>url：访问地址</li>
<li>data：可选，连同请求发送到服务器的数据，键值对集合</li>
<li>success：请求发送成功后运行的函数，额外的参数有：
<ul>
<li>response：来自请求的结果数据</li>
<li>status：请求状态</li>
<li>xhr：XMLHttpRequest对象</li>
</ul></li>
<li>dataType：期望服务器返回的数据类型，如果不指定JQuery会智能判断，可能的类型
<ul>
<li>"xml"</li>
<li>"html"</li>
<li>"text"</li>
<li>"script"</li>
<li>"json"</li>
<li>"jsonp"</li>
</ul></li>
</ul>
<p>例子： 使用get方法发送一个异步请求。返回json数据。</p>
<p>js代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(<span class="string">&quot;some.do&quot;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;姓名:&quot;</span> + data.<span class="property">name</span> + <span class="string">&quot;, 年龄:&quot;</span> + data.<span class="property">age</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>控制器方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSome</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>);</span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> mapper.writeValueAsString(student);</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">    pw.println(json);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出：
<img src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/image/image-20201216113930625.png" alt="image-20201216113930625" style="zoom:50%;" /></p>
<h2 id="post方法">post方法</h2>
<p>和get方法，用法参数都一样，不讲解。</p>
<h2 id="ajax方法">ajax方法</h2>
<p>这个方法是JQuery的底层AJAX实现。其他所有的ajax方法，如刚才讲的get，post都是在这个方法的基础上，进行封装。</p>
<p>可以调用该方法来设置关于异步请求的所有参数。</p>
<p>该方法有一个键值对集合参数settings，在这个集合中设置异步请求配置。</p>
<p>集合中常用参数：</p>
<ul>
<li>url：请求地址</li>
<li>type：请求方式</li>
<li>data：请求携带的参数，键值对集合</li>
<li>dataType：期望返回的数据类型</li>
<li>contentType：发送信息至服务器的内容编码类型，默认为"application/x-www-form-urlencoded"</li>
<li>success：请求成功后的回调函数</li>
<li>async：Boolean类型，默认值为true。即所有请求为异步请求。false为同步请求</li>
<li>timeout：设置请求超时时间，单位为毫秒。此设置将覆盖全局设置</li>
<li>cache：Boolean类型，是否 缓存页面。默认为true，即缓存页面</li>
</ul>
<p>例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&quot;some.do&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">dataType</span>:<span class="string">&quot;json&quot;</span>,</span><br><span class="line">    <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="其他方法">其他方法</h2>
<p><img src="https://crayon-1302863897.cos.ap-beijing.myqcloud.com/image/image-20201216115230833.png" alt="image-20201216115230833" style="zoom:80%;" /></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zhaoquaner.github.io/2022/05/11/JavaWeb/JQuery/4-JQuery%E9%81%8D%E5%8E%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ZhaoXin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 赵圈儿的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/JavaWeb/JQuery/4-JQuery%E9%81%8D%E5%8E%86/" class="post-title-link" itemprop="url">4-JQuery遍历</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-05-11 13:50:39 / 修改时间：16:55:05" itemprop="dateCreated datePublished" datetime="2022-05-11T13:50:39+08:00">2022-05-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/" itemprop="url" rel="index"><span itemprop="name">编程学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/programming/javaweb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>通过JQuery遍历，可以从当前元素开始，在家族树向上移动(祖先)，向下移动(子孙)，水平移动(同胞)。这种移动被称为对DOM进行遍历。</p>
<p>JQuery提供了多种遍历方法。遍历方法中最大种类是树遍历。</p>
<h2 id="祖先">祖先</h2>
<p>通过遍历DOM树，可以查找该元素的父元素，后者叫祖先。</p>
<p>有三个方法：</p>
<ul>
<li>parent()</li>
<li>parents()</li>
<li>parentsUntil()</li>
</ul>
<h3 id="parent方法">parent()方法</h3>
<p>该方法会返回被选元素的直接父元素。</p>
<p>该方法只会向上一级对DOM树进行遍历。</p>
<h3 id="parents方法">parents()方法</h3>
<p>该方法返回被选元素的所有祖先元素，它会一路向上直到文档的根元素html。</p>
<p>也可以使用可选的参数来过滤对祖先元素的搜索。</p>
<p>例如：<code>$("span").parents("ul");</code>就选择了span元素的是ul元素的祖先</p>
<h3 id="parantsuntil方法">parantsUntil()方法</h3>
<p>该方法返回介于两个给定元素之间的所有祖先元素。</p>
<p>例如：<code>$("span").parentsUntil("div");</code>返回了介于span和div元素之间，span的祖先元素，不包括div。</p>
<h2 id="后代">后代</h2>
<p>两个用于遍历DOM树的JQuery方法：</p>
<ul>
<li>children()</li>
<li>find()</li>
</ul>
<h3 id="children方法">children()方法</h3>
<p>该方法会返回被选元素的<strong>所有</strong>直接子元素</p>
<p>该方法只会向下一级对DOM树进行遍历。</p>
<p>也可以使用可选参数来过滤对子元素的搜索，例如：
<code>$("div").children("p.1");</code></p>
<p>返回类名为1的所有p元素，并且是div的直接子元素。</p>
<h3 id="find方法">find()方法</h3>
<p>该方法返回被选元素的所有后代元素，一路向下直到最后一个后代。</p>
<p>有一个参数。</p>
<p>例如：想选择div后代中所有的span元素：<code>$("div").find("span");</code></p>
<p>再例如：返回div所有的后代：<code>$("div").find("*");</code></p>
<h2 id="同胞">同胞</h2>
<p>同胞有相同的父元素，有以下几个方法可以进行水平遍历：</p>
<ul>
<li>siblings()：返回被选元素的所有同胞元素，可以使用可选参数过滤</li>
<li>next()：返回被选元素的下一个同胞元素</li>
<li>nextAll()：返回被选元素后面的所有同胞元素</li>
<li>nextUntil()：返回介于两个给定参数之间所有跟随的同胞元素，不包括给定元素</li>
</ul>
<p>prev()、prevAll()、prevUntil()与上面用法相同，但是方向相反。</p>
<h2 id="过滤">过滤</h2>
<p>有几个过滤方法，他们允许鉴于在一组元素的位置来选择特定元素。</p>
<h3 id="first方法">first()方法</h3>
<p>first()方法返回被选元素的首个元素。</p>
<p>例子：选取首个div元素内部的第一个p元素</p>
<p><code>$("div p").first();</code></p>
<h3 id="last方法">last方法</h3>
<p>返回被选元素的最后一个元素。</p>
<p>例子：选取首个div元素内部的最后一个p元素</p>
<p><code>$("div p").last();</code></p>
<h3 id="eq方法">eq()方法</h3>
<p>该方法返回必选元素带有指定索引号的元素，索引号从0开始。</p>
<p>例子：选取第二个p元素，索引号为1</p>
<p><code>$("p").eq(1);</code></p>
<h3 id="filter方法">filter()方法</h3>
<p>该方法允许规定一个标准，不匹配这个标准的元素会被从集合中删除，匹配的元素会返回。</p>
<p>例子：返回类名为“url”的所有p元素</p>
<p><code>$("p").filter(".url");</code></p>
<h3 id="not方法">not方法</h3>
<p>该方法返回不匹配标准的所有元素，not方法和filter方法相反</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhaoXin</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
